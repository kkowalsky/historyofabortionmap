function initialize(){setMap()}function setMap(){function a(a,e,r,i){function n(a,t,e){for(var s=i.objects.states.geometries,r=0;r<t.length;r++)for(var n=t[r],o=n.adm,c=0;c<s.length;c++)if(s[c].properties.postal==o){attrObj={};for(var d in yearsArray){var p=keyArray[d],l=parseFloat(n[p]);attrObj[p]=l}s[c].properties[e]=attrObj}}var o=[e,r],c=["ConsentData","gradeData"];for(csv in o)n(i,o[csv],c[csv]);t.append("path").datum(topojson.feature(i,i.objects.states)).attr("class","states").attr("d",s)}var t=d3.select(".usmap").append("svg").attr("width",mapWidth).attr("height",mapHeight).attr("class","usmap"),e=d3.geo.albersUsa().scale(1e3).translate([mapWidth/2,mapHeight/2]),s=d3.geo.path().projection(e);queue().defer(d3.csv,"data/consent.csv").defer(d3.csv,"data/Grades.csv").defer(d3.json,"data/usa.topojson").await(a)}function colorScale(){d3.scale.quantile().range(["#f7f7f7","#cccccc","#969696","#636363","#252525"])}var mapWidth=800,mapHeight=600,keyArray=["grades","tacos"],yearsArray=["Pre-1973","1973"],expressed=keyArray[0];window.onload=initialize(),$(function(){$(".nav li a").on("click",function(){var a=$(this).parent("li"),t=a.parent("ul");a.hasClass("active")||(t.find("li.active").removeClass("active"),a.addClass("active"))})});