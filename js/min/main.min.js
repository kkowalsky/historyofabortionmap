function initialize(){setMap()}function setMap(){function a(a,t,s,c){function i(a,e,t){for(var r=c.objects.states.geometries,s=0;s<e.length;s++)for(var i=e[s],o=i.adm,n=0;n<r.length;n++)if(r[n].properties.postal==o){attrObj={};for(var d in yearsArray){var v=keyArray[d],p=parseFloat(i[v]);attrObj[v]=p}r[n].properties[t]=attrObj}}var o=[overview,s],n=["gradeData","ConsentData"];for(csv in o)i(c,o[csv],n[csv]);e.append("path").datum(topojson.feature(c,c.objects.states)).attr("class","states").attr("d",r)}var e=d3.select(".map").append("svg").attr("width",mapWidth).attr("height",mapHeight).attr("class","us-map"),t=d3.geo.albersUsa().scale(1e3).translate([mapWidth/2,mapHeight/2]),r=d3.geo.path().projection(t);queue().defer(d3.csv,"data/grades.csv").defer(d3.csv,"data/consent.csv").defer(d3.json,"data/usa.topojson").await(a)}function colorScale(){d3.scale.ordinal().range(["#f7f7f7","#cccccc","#969696","#636363","#252525"])}var mapWidth=850,mapHeight=600,keyArray=["grades","tacos"],yearsArray=["Pre-1973","1973"],expressed=keyArray[0];window.onload=initialize();var colorArrayOverview=["#fb6a4a","#bcbddc","#9e9ac8","#756bb1","#54278f"],colorArrayOverview=["#fb6a4a","#bcbddc","#9e9ac8","#756bb1","#54278f"];$(function(){$(".nav li a").on("click",function(){var a=$(this).parent("li"),e=a.parent("ul");a.hasClass("active")||(e.find("li.active").removeClass("active"),a.addClass("active"))})});